Nginxさらっとまとめ

![img](https://bongineer.net/wp-content/uploads/2018/05/img_5af97c27c2fd8.png)

# 目次
1. そもそもミドルウェアとは
2. そもそもWebサーバとは
3. Nginxとは
4. Apacheとの違い
5. 参考文献
6. おわりに

# 1. そもそもミドルウェアとは
> ミドルウェア（英: Middleware）は、コンピュータの分野で、コンピュータの基本的な制御を行うオペレーティングシステム(OS)と、各業務処理を行うアプリケーションソフトウェアとの中間に入るソフトウェアのこと。

(Wikipediaより)

ミドルウェアとはOSとアプリケーションソフトウェアとの中間にあるソフトウェアのことで、OSの基本的な機能だけではカバーできない必要な機能を集約してパッケージとしてまとめたもの。

![img](https://camo.qiitausercontent.com/68f92edca6711bf64cca84b2e8dcc471a8e79fcb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139313931392f34653133363965612d653734632d666138622d343564612d6261343738363730333832622e706e67)

# 2. そもそもWebサーバとは
Webサーバとはミドルウェアの一つ。

![img](https://camo.qiitausercontent.com/83b05853682e217c0dc8c8ded6dd566c340a62cb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139313931392f32336333393336382d343733322d353361302d373838352d6137666539616538306337662e706e67)

サイトを公開するためにはWebサーバが必要で、サイトを閲覧するためにはWebクライアント(ChromeとかIE、Safariなど)が必要。
流れとしては、以下のような感じ
```
1. Webクライアントを使ってWebサイトにアクセス
2. WebクライアントからのリクエストをWebサーバが受け取る
3. Webサーバは要求に対応したHTMLや画像などのデータを探す
4. WebサーバはデータをWebクライアントに返す
```
![img](https://mdn.mozillademos.org/files/8659/web-server.svg)

# 3. Nginxとは
Nginxとは、Webサーバの一つで処理性能/並行処理/メモリ使用量削減にフォーカスして開発されているWebサーバ/リバースプロキシ。

C10K（クライアント1万台問題）を始め、大容量のデータ配信や大量同時接続に耐えることを目的に設計されたもの。

C10Kとは
```
約１万台ものアクセスがApacheサーバに集中し、ハードウェアの性能に関係なくレスポンス性能が大きく下がる問題
```

Nginxが備えてる主な機能としては、
```
- リーバースプロキシ機能
- メールプロキシ機能
- 負荷分散機能
- URL Rewrite機能
- WebDAV機能
```

Nginxを採用している企業としては、Facebook/Wikipedia/クックパッド/メルカリ/Huluなど

# 4. Apacheとの違い
## Nginx
メリット
```
- Nginxはイベント駆動なので、少量のプロセスで大量のリクエストを処理することができる → C10k問題の解消
- リバースプロキシ（特定のサーバへの要求を必ず経由するように設置されたプロキシサーバ）やロードバランサ（負荷分散装置）の機能を有する
- nginxの方が設定ファイル（nginx.conf）がより直感的で柔軟に設定を行うことができる
```

デメリット
```
- CPUリソースがたくさん必要な処理には向いていない
- エンジン単品では機能に乏しく、PHPを代表としたスクリプト言語を処理する機能は付いていない
```

## Apache
メリット
```
- OSSで、誰でも無償で利用可能
- 20年以上公開されてるため、公式非公式を問わず開発者向けの技術情報が手に入りやすい
- モジュールにより基本機能を拡張できる
- 動的コンテンツなどの重い処理が得意
- PHPとの相性がいい
- CMS(Contents Management System)を利用する際に、比較的簡単な設定で済む
```

デメリット
```
- 各リクエストをプロセスに割り当てて処理を行うため、リクエストが大量に来た際にプロセスが同時に起動するので負荷が非常に大きくなる
```

# 5. 参考文献
https://bongineer.net/entry/nginx-apache/<br>
https://eng-entrance.com/web-server-mechanism<br>
https://kitsune-programming.com/nginx-install<br>
https://qiita.com/kamihork/items/49e2a363da7d840a4149<br>

# 6. おわりに
RubyやってるとNginxの方がよく見る気がする
